
srcdir=@srcdir@
VPATH=$(srcdir)

include ../Make.config

FONTSERVER := unix/:7100
FONTSPEC   := -misc-fixed-medium-r-semicondensed-*-13-120-75-75-c-60

PCF        := led-iso8859-1.pcf led-iso8859-2.pcf led-iso8859-15.pcf \
	      led-koi8-r.pcf
BDF        := $(PCF:pcf=bdf)

all build: $(PCF)
	mkfontdir

install: all
	mkdir -p $(fontdir)
	for file in $(PCF); do				\
		install -m 644 $$file $(fontdir);	\
		gzip $(fontdir)/$$file;			\
	done
	if test "$(DESTDIR)" = ""; then		\
		(cd $(fontdir); mkfontdir);	\
		xset fp rehash || true;		\
	fi


.SUFFIXES: .bdf .pcf
.bdf.pcf:
	bdftopcf -o $@ $<

$(BDF):
	FONTSERVER=$(FONTSERVER); export FONTSERVER;		\
	charset=`echo $@ | sed -e 's|led-||' -e 's|.bdf||'`;	\
	perl ./bigfont.pl -fn "$(FONTSPEC)-$$charset" > $@


dep depend:

clean:
	rm -f *.pcf

distclean: clean
	rm -f Makefile *~ *.bak fonts.dir

realclean: distclean
	rm -f *.bdf


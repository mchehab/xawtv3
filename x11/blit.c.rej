*************** static int gl_init(Widget widget)
*** 538,551 ****
  	    fprintf(stderr,"blit: gl: can't create context\n");
  	return -1;
      }
-     glXMakeCurrent(XtDisplay(widget),XtWindow(widget),ctx);
-     if (debug)
- 	fprintf(stderr, "blit: gl: DRI=%s\n",
- 		glXIsDirect(XtDisplay(widget), ctx) ? "Yes" : "No");
  
      /* there is no point in using OpenGL for image scaling if it
       * isn't hardware accelerated ... */
      if (!glXIsDirect(XtDisplay(widget), ctx))
  	return -1;
      
      have_gl = 1;
--- 546,565 ----
  	    fprintf(stderr,"blit: gl: can't create context\n");
  	return -1;
      }
  
      /* there is no point in using OpenGL for image scaling if it
       * isn't hardware accelerated ... */
+     if (debug)
+ 	fprintf(stderr, "blit: gl: DRI=%s\n",
+ 		glXIsDirect(XtDisplay(widget), ctx) ? "Yes" : "No");
      if (!glXIsDirect(XtDisplay(widget), ctx))
+ 	return -1;
+ 
+     old_handler = XSetErrorHandler(catch_gl_error);
+     glXMakeCurrent(XtDisplay(widget),XtWindow(widget),ctx);
+     XSync(XtDisplay(widget), False);
+     XSetErrorHandler(old_handler);
+     if (gl_error)
  	return -1;
      
      have_gl = 1;

srcdir=@srcdir@
VPATH=$(srcdir)

include ../Make.config

CFLAGS=-g @CFLAGS@ $(WARN_FLAGS) $(LFS_FLAGS) $(X11_FLAGS) \
	-I$(srcdir)/.. -I..

PROGS=dump-mixers record showriff @TOOLS@

##########################################################################

all build: $(PROGS)

dump-mixers: dump-mixers.o
	$(CC) $(CFLAGS) -o $@ dump-mixers.o $(SOUND_LIBS)

showriff: showriff.o
	$(CC) $(CFLAGS) -o $@ showriff.o

record: record.o
	$(CC) $(CFLAGS) -o $@ record.o $(CURSES_LIBS) $(SOUND_LIBS)

propwatch: propwatch.o
	$(CC) $(CFLAGS) -o $@ propwatch.o $(ATHENA_LIBS)

install: all
	$(INSTALL_DIR) $(bindir)
	$(INSTALL_DIR) $(mandir)/man1
	$(INSTALL_PROGRAM) -s dump-mixers $(bindir)
	$(INSTALL_PROGRAM) -s record $(bindir)
	$(INSTALL_PROGRAM) -s showriff $(bindir)
	$(INSTALL_PROGRAM) -s propwatch $(bindir)
	for page in $(srcdir)/*.man; do					\
		dest=`basename $$page .man`;				\
		$(INSTALL_DATA) $$page $(mandir)/man1/$$dest.1;		\
	done

clean:
	-rm -f *.o *.moc core* TAGS

realclean distclean: clean
	-rm -f $(PROGS) Makefile *~ *.bak

dep depend:
	$(DEPEND) -- $(CFLAGS) -- *.c

#-------------------------------------------------------------------------
# DO NOT DELETE THIS LINE -- make depend depends on it.

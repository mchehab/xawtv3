srcdir=@srcdir@
VPATH=$(srcdir)

ROOT=
prefix=$(ROOT)@prefix@
bindir=$(prefix)/bin
mandir=$(prefix)/man

CC=@CC@
INSTALL=@INSTALL@
INSTALL_PROGRAM=@INSTALL_PROGRAM@
INSTALL_DATA=@INSTALL_DATA@
INSTALL_DIR=mkdir -p

CFLAGS=-g -Wall @CFLAGS@ @X_CFLAGS@
XLDLIBS=@X_LIBS@ @LIBS@ -l@XAWLIB@ -lXmu -lXt @X_PRE_LIBS@ -lXext \
	-lX11 @X_EXTRA_LIBS@

PROGS=dump-mixers record showriff propwatch

##########################################################################

all: $(PROGS)

dump-mixers: dump-mixers.o
	$(CC) $(CFLAGS) -o $@ $<

showriff: showriff.o
	$(CC) $(CFLAGS) -o $@ $<

record: record.o
	$(CC) $(CFLAGS) -o $@ $< -lncurses

propwatch: propwatch.o
	$(CC) $(CFLAGS) -o $@ $< $(XLDLIBS)

install: all
	$(INSTALL_DIR) $(bindir)
	$(INSTALL_DIR) $(mandir)/man1
	$(INSTALL_PROGRAM) -s dump-mixers $(bindir)
	$(INSTALL_PROGRAM) -s record $(bindir)
	$(INSTALL_PROGRAM) -s showriff $(bindir)
	$(INSTALL_PROGRAM) -s propwatch $(bindir)
	for page in $(srcdir)/*.man; do						\
		dest=`basename $$page .man`;				\
		$(INSTALL_DATA) $$page $(mandir)/man1/$$dest.1;		\
	done

clean:
	-rm -f *.o *.moc *~ core* *.bak TAGS

realclean distclean: clean
	-rm -f $(PROGS) Makefile

dep depend:
